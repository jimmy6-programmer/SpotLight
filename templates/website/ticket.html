{% load static %}
<!DOCTYPE html>
<html lang="en">


<!-- pricing16:34-->
<head>
   <!-- Basic Page Needs ================================================== -->
   <meta charset="utf-8">

   <!-- Mobile Specific Metas ================================================== -->
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">

   <!-- Site Title -->
   <title>|| SpotLight ||</title>
      <!-- CSS
         ================================================== -->
   <!-- Bootstrap -->
   <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">

   <!-- FontAwesome -->
   <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">
   <!-- Animation -->
   <link rel="stylesheet" href="{% static 'css/animate.css' %}">
   <!-- magnific -->
   <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
   <!-- carousel -->
   <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
   <!-- isotop -->
   <link rel="stylesheet" href="{% static 'css/isotop.css' %}">
   <!-- ico fonts -->
   <link rel="stylesheet" href="{% static 'css/xsIcon.css' %}">
   <!-- Template styles-->
   <link rel="stylesheet" href="{% static 'css/style.css' %}">
   <!-- Responsive styles-->
   <link rel="stylesheet" href="{% static 'css/responsive.css' %}">

   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

   <style>
   
     .pricing-item.disabled {
         opacity: 0.6;
         pointer-events: none;
     }
     
     .ts-progress {
         background: #f0f0f0;
         border-radius: 5px;
         height: 10px;
         overflow: hidden;
         position: relative;
     }
     
     .ts-progress-inner {
         background: #4caf50;
         height: 100%;
     }
     
     .pricing-btn.disabled {
         background: #ccc;
         cursor: not-allowed;
     }     
   </style>

</head>

<body>
   <div class="body-inner">
      <!-- Header start -->
      <header id="header" class="header header-transparent">
         <div class="container">
            {% include "./including_page/nav.html" %}
         </div><!-- container end-->
      </header>
      <!--/ Header end -->

      <div id="page-banner-area" class="page-banner-area" style="background-image:url({% static 'images/hero_area/banner_bg.jpg' %})">
         <!-- Subpage title start -->
         <div class="page-banner-title">
            <div class="text-center">
               <h2>Tickets</h2>
               <ol class="breadcrumb">
                  <li>
                     <a href="#">SpotLight /</a>
                  </li>
                  <li>
                     Tickets
                  </li>
               </ol>
            </div>
         </div><!-- Subpage title end -->
      </div><!-- Page Banner end -->


      <section class="ts-pricing gradient" style="background-image: url({% static 'images/pricing/pricing_img.jpg' %})">
         <div class="container">
            <div class="row">
               <div class="col-lg-12">
                  <h2 class="section-title white">
                     <span>Pricing Plans</span>
                     Get your Ticket
                  </h2>
               </div><!-- section title end-->
            </div><!-- col end-->
            <!-- row end-->
            <div class="row">
               {% for ticket in tickets %}
               <div class="col-lg-4">
                   {% if ticket.remaining_tickets > 0 %}
                   <div class="pricing-item">
                       <img class="pricing-dot" src="{% static 'images/pricing/dot.png' %}" alt="dot">
                       <div class="ts-pricing-box">
                           <span class="big-dot">{{ ticket.name }}</span>
                           <div class="ts-pricing-header">
                               <h2 class="ts-pricing-name"></h2>
                               <h3 class="ts-pricing-price" style="font-size: 1.8rem;">
                                   <span class="currency">RF</span>{{ ticket.price }}
                               </h3>
                           </div>
                           <div class="ts-pricing-progress">
                               <p class="amount-progres-text">Available tickets for this price</p>
                               <div class="ts-progress">
                                   <div class="ts-progress-inner" style="width: {{ ticket.percentage_remaining }}%;"></div>
                               </div>
                               <p class="ts-pricing-value">{{ ticket.remaining_tickets }}/{{ ticket.number_of_ticket }}</p>
                           </div>
                           <div class="promotional-code">
                               <a href="{% url 'checkout' ticket_id=ticket.id %}" class="btn pricing-btn">Buy Ticket</a>
                               <p class="vate-text">All prices exclude 25% VAT</p>
                           </div>
                       </div><!-- ts-pricing-box -->
                       <img class="pricing-dot1" src="{% static 'images/pricing/dot.png' %}" alt="dot">
                   </div>
                   {% else %}
                   <div class="pricing-item disabled">
                       <img class="pricing-dot" src="{% static 'images/pricing/dot.png' %}" alt="dot">
                       <div class="ts-pricing-box">
                           <span class="big-dot">{{ ticket.name }}</span>
                           <div class="ts-pricing-header">
                               <h2 class="ts-pricing-name"></h2>
                               <h3 class="ts-pricing-price" style="font-size: 1.8rem;">
                                   <span class="currency">RF</span>{{ ticket.price }}
                               </h3>
                           </div>
                           <div class="ts-pricing-progress">
                               <p class="amount-progres-text">Available tickets for this price</p>
                               <div class="ts-progress">
                                   <div class="ts-progress-inner" style="width: {{ ticket.percentage_remaining }}%;"></div>
                               </div>
                               <p class="ts-pricing-value">{{ ticket.remaining_tickets }}/{{ ticket.number_of_ticket }}</p>
                           </div>
                           <div class="promotional-code">
                               <a href="#" class="btn pricing-btn disabled">Sold Out</a>
                               <p class="vate-text">All prices exclude 25% VAT</p>
                           </div>
                       </div><!-- ts-pricing-box -->
                       <img class="pricing-dot1" src="{% static 'images/pricing/dot.png' %}" alt="dot">
                   </div>
                   {% endif %}
               </div><!-- col-lg-4 -->
               {% endfor %}
            </div>
         </div><!-- container end-->
         <div class="speaker-shap">
            <img class="shap2" src="{% static 'images/shap/pricing_memphis1.png' %}" alt="">
         </div>
      </section>

      <!-- Parking Lots Section -->
      <div class="col-lg-12 mt-5">
         <h4 class="text-center">Book Your Parking Lot</h4>
         <div class="parking-lot-container d-flex justify-content-center">
            <img src="{% static 'images/icons/car.png' %}" alt="Car" class="car-icon">
         </div>
         <div class="d-flex justify-content-center">
            <a href="{% url 'ticket' event_id=event.id %}" class="btn btn-info ml-3" data-toggle="modal" data-target="#bookParkingModal">
                Book Parking Lot
            </a>
        </div>
         <p class="text-center mt-2">Reserve your parking for a hassle-free event experience.</p>
      </div>


      <!-- Bootstrap Modal -->
      <div class="modal fade" id="bookParkingModal" tabindex="-1" role="dialog" aria-labelledby="bookParkingModalLabel" aria-hidden="true">
         <div class="modal-dialog" role="document">
         <div class="modal-content">
            <div class="modal-header">
               <h5 class="modal-title" id="bookParkingModalLabel">Book Parking Lot</h5>
               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
               <span aria-hidden="true">&times;</span>
               </button>
            </div>
            <div class="modal-body">
               <!-- Parking Lot Booking Form -->
               <form method="post" action="{% url 'ticket' event.id %}">
               {% csrf_token %}
      
               <!-- Display errors if any -->
               {% if error %}
                  <div class="alert alert-danger">{{ error }}</div>
               {% endif %}

               <!-- Select parking lot -->
               <div class="form-group">
                  <label for="parking_lot_id">Select Parking Lot:</label>
                  <select name="parking_lot_id" id="parking_lot_id" class="form-control" required>
                      {% for lot in parking_lots %}
                          <option value="{{ lot.id }}">{{ lot.lot_number }} ({{ lot.price }})</option>
                      {% endfor %}
                  </select>
               </div>
      
               <!-- Firstname Field -->
               <div class="form-group">
                  <label for="firstname">First Name:</label>
                  <input type="text" name="firstname" class="form-control" id="firstname" required>
               </div>
      
               <!-- Lastname Field -->
               <div class="form-group">
                  <label for="lastname">Last Name:</label>
                  <input type="text" name="lastname" class="form-control" id="lastname" required>
               </div>
      
               <!-- Telephone Field -->
               <div class="form-group">
                  <label for="phonenumber">Telephone Number:</label>
                  <input type="tel" name="phonenumber" class="form-control" id="phonenumber" required pattern="07[2389]\d{7}">
               </div>
      
               <!-- Payment Method Field -->
               <div class="form-group">
                  <label for="payment_method">Select a payment method:</label>
                  <div class="payment-options d-flex flex-wrap ml-3">
                     <div class="form-check form-check-inline mb-3" style="margin-right: 30px;">
                     <input type="radio" name="payment_method" value="MTN" id="MTN" class="form-check-input" required>
                     <label for="MTN" class="d-flex align-items-center">
                        <img src="{% static 'images/mtn_icon.png' %}" alt="MTN" style="height: 24px; margin-right: 8px;">
                        MTN
                     </label>
                     </div>
                     <div class="form-check form-check-inline mb-3" style="margin-right: 30px;">
                     <input type="radio" name="payment_method" value="Airtel" id="Airtel" class="form-check-input" required>
                     <label for="Airtel" class="d-flex align-items-center">
                        <img src="{% static 'images/airtel_icon.png' %}" alt="Airtel" style="height: 24px; margin-right: 8px;">
                        Airtel
                     </label>
                     </div>
                  </div>
               </div>
      
               <!-- Submit Button -->
               <button type="submit" class="btn btn-primary">
                  <i class="fa fa-car"></i> Book Parking Lot
               </button>
               </form>
            </div>
         </div>
         </div>
      </div>

     <!-- Parking lot section end -->

      <!-- ts footer area start-->
      <div class="footer-area">

         {% include "./including_page/footer.html" %}

         <div class="BackTo">
                  <a href="#" class="fa fa-angle-up" aria-hidden="true"></a>
              </div>
      </div>
      <!-- ts footer area end-->



      <!-- Javascript Files
            ================================================== -->
      <!-- initialize jQuery Library -->
      <script src="{% static 'js/jquery.js' %}"></script>

      <script src="{% static 'js/popper.min.js' %}"></script>
      <!-- Bootstrap jQuery -->
      <script src="{% static 'js/bootstrap.min.js' %}"></script>
      <!-- Counter -->
      <script src="{% static 'js/jquery.appear.min.js' %}"></script>
      <!-- Countdown -->
      <script src="{% static 'js/jquery.jCounter.js' %}"></script>
      <!-- magnific-popup -->
      <script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
      <!-- carousel -->
      <script src="{% static 'js/owl.carousel.min.js' %}"></script>
      <!-- Waypoints -->
      <script src="{% static 'js/wow.min.js' %}"></script>
      <!-- isotop -->
      <script src="{% static 'js/isotope.pkgd.min.js' %}"></script>

      <!-- Template custom -->
      <script src="{% static 'js/main.js' %}"></script>
   </div>
   <!-- Body inner end -->
</body>


<!-- pricing16:34-->
</html>